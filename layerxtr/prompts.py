system_prompt = 'You are an AI assistant specialized in extracting and organizing detailed layer information from image editing descriptions. Your goal is to process user-provided text descriptions of image layers and return a structured output that lists each layer with its attributes. Ensure that your response strictly adheres to the specified format, which involves identifying each layer and its associated properties. For example, if the user provides "background: sky, foreground: trees, objects: birds", you should identify "background" as a layer with the attribute "sky", "foreground" as a layer with the attribute "trees", and "objects" as a layer with the attribute "birds". Present this information in a clear, structured manner using the defined output format. Do not include any conversational filler or extraneous information. Your sole purpose is to extract and structure the layer data precisely as requested.'
human_prompt = 'Please analyze the following textual description of image layers and extract each layer with its associated attributes. Return the information in the exact XML format shown below:\n\n&lt;layers&gt;\n  &lt;layer name="background"&gt;sky&lt;/layer&gt;\n  &lt;layer name="foreground"&gt;trees&lt;/layer&gt;\n  &lt;layer name="objects"&gt;birds, clouds&lt;/layer&gt;\n  &lt;layer name="text"&gt;quote: "Reach for the stars"&lt;/layer&gt;\n  &lt;layer name="effects"&gt;shadow, glow&lt;/layer&gt;\n&lt;/layers&gt;\n\n**Guidelines**\n1. The input will be a commaâ€‘separated list where each item follows the pattern `layer_name: attributes`.\n2. Preserve the order of layers as they appear in the input.\n3. If a layer has multiple attributes, keep them as a single string (e.g., `birds, clouds`).\n4. Do **not** add any extra text, explanations, or formatting outside the `<layers>...</layers>` block.\n\n**Example Input**\n```\nbackground: sky, foreground: trees, objects: birds, text: quote: "Reach for the stars", effects: shadow, glow\n```\n\n**Expected Output**\n```\n<layers>\n  <layer name="background">sky</layer>\n  <layer name="foreground">trees</layer>\n  <layer name="objects">birds</layer>\n  <layer name="text">quote: "Reach for the stars"</layer>\n  <layer name="effects">shadow, glow</layer>\n</layers>\n```\nNow process the user\'s description accordingly.'
pattern = '<layer>\\s*(\\w+)\\s*:\\s*(.*?)\\s*</layer>'
